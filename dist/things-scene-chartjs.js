!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@hatiolab/things-scene"),require("chart.js")):"function"==typeof define&&define.amd?define(["@hatiolab/things-scene","chart.js"],e):(t=t||self)["things-scene-chartjs"]=e(t.scene,t.Chart)}(this,function(t,e){"use strict";var r="default"in e?e.default:e;var n=function(){this.__data__=[],this.size=0};var a=function(t,e){return t===e||t!=t&&e!=e};var i=function(t,e){for(var r=t.length;r--;)if(a(t[r][0],e))return r;return-1},o=Array.prototype.splice;var s=function(t){var e=this.__data__,r=i(e,t);return!(r<0||(r==e.length-1?e.pop():o.call(e,r,1),--this.size,0))};var l=function(t){var e=this.__data__,r=i(e,t);return r<0?void 0:e[r][1]};var c=function(t){return i(this.__data__,t)>-1};var u=function(t,e){var r=this.__data__,n=i(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function h(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}h.prototype.clear=n,h.prototype.delete=s,h.prototype.get=l,h.prototype.has=c,h.prototype.set=u;var d=h;var f=function(){this.__data__=new d,this.size=0};var p=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var g=function(t){return this.__data__.get(t)};var y=function(t){return this.__data__.has(t)},v="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(t,e){return t(e={exports:{}},e.exports),e.exports}var m="object"==typeof v&&v&&v.Object===Object&&v,_="object"==typeof self&&self&&self.Object===Object&&self,x=m||_||Function("return this")(),w=x.Symbol,S=Object.prototype,A=S.hasOwnProperty,k=S.toString,j=w?w.toStringTag:void 0;var C=function(t){var e=A.call(t,j),r=t[j];try{t[j]=void 0;var n=!0}catch(t){}var a=k.call(t);return n&&(e?t[j]=r:delete t[j]),a},P=Object.prototype.toString;var M=function(t){return P.call(t)},O="[object Null]",N="[object Undefined]",F=w?w.toStringTag:void 0;var z=function(t){return null==t?void 0===t?N:O:F&&F in Object(t)?C(t):M(t)};var E=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},T="[object AsyncFunction]",R="[object Function]",D="[object GeneratorFunction]",I="[object Proxy]";var V,L=function(t){if(!E(t))return!1;var e=z(t);return e==R||e==D||e==T||e==I},U=x["__core-js_shared__"],H=(V=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"";var $=function(t){return!!H&&H in t},B=Function.prototype.toString;var q=function(t){if(null!=t){try{return B.call(t)}catch(t){}try{return t+""}catch(t){}}return""},W=/^\[object .+?Constructor\]$/,J=Function.prototype,G=Object.prototype,K=J.toString,X=G.hasOwnProperty,Z=RegExp("^"+K.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Q=function(t){return!(!E(t)||$(t))&&(L(t)?Z:W).test(q(t))};var Y=function(t,e){return null==t?void 0:t[e]};var tt=function(t,e){var r=Y(t,e);return Q(r)?r:void 0},et=tt(x,"Map"),rt=tt(Object,"create");var nt=function(){this.__data__=rt?rt(null):{},this.size=0};var at=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},it="__lodash_hash_undefined__",ot=Object.prototype.hasOwnProperty;var st=function(t){var e=this.__data__;if(rt){var r=e[t];return r===it?void 0:r}return ot.call(e,t)?e[t]:void 0},lt=Object.prototype.hasOwnProperty;var ct=function(t){var e=this.__data__;return rt?void 0!==e[t]:lt.call(e,t)},ut="__lodash_hash_undefined__";var ht=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=rt&&void 0===e?ut:e,this};function dt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}dt.prototype.clear=nt,dt.prototype.delete=at,dt.prototype.get=st,dt.prototype.has=ct,dt.prototype.set=ht;var ft=dt;var pt=function(){this.size=0,this.__data__={hash:new ft,map:new(et||d),string:new ft}};var gt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var yt=function(t,e){var r=t.__data__;return gt(e)?r["string"==typeof e?"string":"hash"]:r.map};var vt=function(t){var e=yt(this,t).delete(t);return this.size-=e?1:0,e};var bt=function(t){return yt(this,t).get(t)};var mt=function(t){return yt(this,t).has(t)};var _t=function(t,e){var r=yt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function xt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}xt.prototype.clear=pt,xt.prototype.delete=vt,xt.prototype.get=bt,xt.prototype.has=mt,xt.prototype.set=_t;var wt=xt,St=200;var At=function(t,e){var r=this.__data__;if(r instanceof d){var n=r.__data__;if(!et||n.length<St-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new wt(n)}return r.set(t,e),this.size=r.size,this};function kt(t){var e=this.__data__=new d(t);this.size=e.size}kt.prototype.clear=f,kt.prototype.delete=p,kt.prototype.get=g,kt.prototype.has=y,kt.prototype.set=At;var jt=kt;var Ct=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},Pt=function(){try{var t=tt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Mt=function(t,e,r){"__proto__"==e&&Pt?Pt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Ot=Object.prototype.hasOwnProperty;var Nt=function(t,e,r){var n=t[e];Ot.call(t,e)&&a(n,r)&&(void 0!==r||e in t)||Mt(t,e,r)};var Ft=function(t,e,r,n){var a=!r;r||(r={});for(var i=-1,o=e.length;++i<o;){var s=e[i],l=n?n(r[s],t[s],s,r,t):void 0;void 0===l&&(l=t[s]),a?Mt(r,s,l):Nt(r,s,l)}return r};var zt=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var Et=function(t){return null!=t&&"object"==typeof t},Tt="[object Arguments]";var Rt=function(t){return Et(t)&&z(t)==Tt},Dt=Object.prototype,It=Dt.hasOwnProperty,Vt=Dt.propertyIsEnumerable,Lt=Rt(function(){return arguments}())?Rt:function(t){return Et(t)&&It.call(t,"callee")&&!Vt.call(t,"callee")},Ut=Array.isArray;var Ht=function(){return!1},$t=b(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,a=n&&n.exports===r?x.Buffer:void 0,i=(a?a.isBuffer:void 0)||Ht;t.exports=i}),Bt=9007199254740991,qt=/^(?:0|[1-9]\d*)$/;var Wt=function(t,e){var r=typeof t;return!!(e=null==e?Bt:e)&&("number"==r||"symbol"!=r&&qt.test(t))&&t>-1&&t%1==0&&t<e},Jt=9007199254740991;var Gt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Jt},Kt={};Kt["[object Float32Array]"]=Kt["[object Float64Array]"]=Kt["[object Int8Array]"]=Kt["[object Int16Array]"]=Kt["[object Int32Array]"]=Kt["[object Uint8Array]"]=Kt["[object Uint8ClampedArray]"]=Kt["[object Uint16Array]"]=Kt["[object Uint32Array]"]=!0,Kt["[object Arguments]"]=Kt["[object Array]"]=Kt["[object ArrayBuffer]"]=Kt["[object Boolean]"]=Kt["[object DataView]"]=Kt["[object Date]"]=Kt["[object Error]"]=Kt["[object Function]"]=Kt["[object Map]"]=Kt["[object Number]"]=Kt["[object Object]"]=Kt["[object RegExp]"]=Kt["[object Set]"]=Kt["[object String]"]=Kt["[object WeakMap]"]=!1;var Xt=function(t){return Et(t)&&Gt(t.length)&&!!Kt[z(t)]};var Zt=function(t){return function(e){return t(e)}},Qt=b(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,a=n&&n.exports===r&&m.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=i}),Yt=Qt&&Qt.isTypedArray,te=Yt?Zt(Yt):Xt,ee=Object.prototype.hasOwnProperty;var re=function(t,e){var r=Ut(t),n=!r&&Lt(t),a=!r&&!n&&$t(t),i=!r&&!n&&!a&&te(t),o=r||n||a||i,s=o?zt(t.length,String):[],l=s.length;for(var c in t)!e&&!ee.call(t,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Wt(c,l))||s.push(c);return s},ne=Object.prototype;var ae=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ne)};var ie=function(t,e){return function(r){return t(e(r))}},oe=ie(Object.keys,Object),se=Object.prototype.hasOwnProperty;var le=function(t){if(!ae(t))return oe(t);var e=[];for(var r in Object(t))se.call(t,r)&&"constructor"!=r&&e.push(r);return e};var ce=function(t){return null!=t&&Gt(t.length)&&!L(t)};var ue=function(t){return ce(t)?re(t):le(t)};var he=function(t,e){return t&&Ft(e,ue(e),t)};var de=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},fe=Object.prototype.hasOwnProperty;var pe=function(t){if(!E(t))return de(t);var e=ae(t),r=[];for(var n in t)("constructor"!=n||!e&&fe.call(t,n))&&r.push(n);return r};var ge=function(t){return ce(t)?re(t,!0):pe(t)};var ye=function(t,e){return t&&Ft(e,ge(e),t)},ve=b(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,a=n&&n.exports===r?x.Buffer:void 0,i=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}});var be=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var me=function(t,e){for(var r=-1,n=null==t?0:t.length,a=0,i=[];++r<n;){var o=t[r];e(o,r,t)&&(i[a++]=o)}return i};var _e=function(){return[]},xe=Object.prototype.propertyIsEnumerable,we=Object.getOwnPropertySymbols,Se=we?function(t){return null==t?[]:(t=Object(t),me(we(t),function(e){return xe.call(t,e)}))}:_e;var Ae=function(t,e){return Ft(t,Se(t),e)};var ke=function(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t},je=ie(Object.getPrototypeOf,Object),Ce=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ke(e,Se(t)),t=je(t);return e}:_e;var Pe=function(t,e){return Ft(t,Ce(t),e)};var Me=function(t,e,r){var n=e(t);return Ut(t)?n:ke(n,r(t))};var Oe=function(t){return Me(t,ue,Se)};var Ne=function(t){return Me(t,ge,Ce)},Fe=tt(x,"DataView"),ze=tt(x,"Promise"),Ee=tt(x,"Set"),Te=tt(x,"WeakMap"),Re=q(Fe),De=q(et),Ie=q(ze),Ve=q(Ee),Le=q(Te),Ue=z;(Fe&&"[object DataView]"!=Ue(new Fe(new ArrayBuffer(1)))||et&&"[object Map]"!=Ue(new et)||ze&&"[object Promise]"!=Ue(ze.resolve())||Ee&&"[object Set]"!=Ue(new Ee)||Te&&"[object WeakMap]"!=Ue(new Te))&&(Ue=function(t){var e=z(t),r="[object Object]"==e?t.constructor:void 0,n=r?q(r):"";if(n)switch(n){case Re:return"[object DataView]";case De:return"[object Map]";case Ie:return"[object Promise]";case Ve:return"[object Set]";case Le:return"[object WeakMap]"}return e});var He=Ue,$e=Object.prototype.hasOwnProperty;var Be=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&$e.call(t,"index")&&(r.index=t.index,r.input=t.input),r},qe=x.Uint8Array;var We=function(t){var e=new t.constructor(t.byteLength);return new qe(e).set(new qe(t)),e};var Je=function(t,e){var r=e?We(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Ge=/\w*$/;var Ke=function(t){var e=new t.constructor(t.source,Ge.exec(t));return e.lastIndex=t.lastIndex,e},Xe=w?w.prototype:void 0,Ze=Xe?Xe.valueOf:void 0;var Qe=function(t){return Ze?Object(Ze.call(t)):{}};var Ye=function(t,e){var r=e?We(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},tr="[object Boolean]",er="[object Date]",rr="[object Map]",nr="[object Number]",ar="[object RegExp]",ir="[object Set]",or="[object String]",sr="[object Symbol]",lr="[object ArrayBuffer]",cr="[object DataView]",ur="[object Float32Array]",hr="[object Float64Array]",dr="[object Int8Array]",fr="[object Int16Array]",pr="[object Int32Array]",gr="[object Uint8Array]",yr="[object Uint8ClampedArray]",vr="[object Uint16Array]",br="[object Uint32Array]";var mr=function(t,e,r){var n=t.constructor;switch(e){case lr:return We(t);case tr:case er:return new n(+t);case cr:return Je(t,r);case ur:case hr:case dr:case fr:case pr:case gr:case yr:case vr:case br:return Ye(t,r);case rr:return new n;case nr:case or:return new n(t);case ar:return Ke(t);case ir:return new n;case sr:return Qe(t)}},_r=Object.create,xr=function(){function t(){}return function(e){if(!E(e))return{};if(_r)return _r(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var wr=function(t){return"function"!=typeof t.constructor||ae(t)?{}:xr(je(t))},Sr="[object Map]";var Ar=function(t){return Et(t)&&He(t)==Sr},kr=Qt&&Qt.isMap,jr=kr?Zt(kr):Ar,Cr="[object Set]";var Pr=function(t){return Et(t)&&He(t)==Cr},Mr=Qt&&Qt.isSet,Or=Mr?Zt(Mr):Pr,Nr=1,Fr=2,zr=4,Er="[object Arguments]",Tr="[object Function]",Rr="[object GeneratorFunction]",Dr="[object Object]",Ir={};Ir[Er]=Ir["[object Array]"]=Ir["[object ArrayBuffer]"]=Ir["[object DataView]"]=Ir["[object Boolean]"]=Ir["[object Date]"]=Ir["[object Float32Array]"]=Ir["[object Float64Array]"]=Ir["[object Int8Array]"]=Ir["[object Int16Array]"]=Ir["[object Int32Array]"]=Ir["[object Map]"]=Ir["[object Number]"]=Ir[Dr]=Ir["[object RegExp]"]=Ir["[object Set]"]=Ir["[object String]"]=Ir["[object Symbol]"]=Ir["[object Uint8Array]"]=Ir["[object Uint8ClampedArray]"]=Ir["[object Uint16Array]"]=Ir["[object Uint32Array]"]=!0,Ir["[object Error]"]=Ir[Tr]=Ir["[object WeakMap]"]=!1;var Vr=function t(e,r,n,a,i,o){var s,l=r&Nr,c=r&Fr,u=r&zr;if(n&&(s=i?n(e,a,i,o):n(e)),void 0!==s)return s;if(!E(e))return e;var h=Ut(e);if(h){if(s=Be(e),!l)return be(e,s)}else{var d=He(e),f=d==Tr||d==Rr;if($t(e))return ve(e,l);if(d==Dr||d==Er||f&&!i){if(s=c||f?{}:wr(e),!l)return c?Pe(e,ye(s,e)):Ae(e,he(s,e))}else{if(!Ir[d])return i?e:{};s=mr(e,d,l)}}o||(o=new jt);var p=o.get(e);if(p)return p;if(o.set(e,s),Or(e))return e.forEach(function(a){s.add(t(a,r,n,a,e,o))}),s;if(jr(e))return e.forEach(function(a,i){s.set(i,t(a,r,n,i,e,o))}),s;var g=u?c?Ne:Oe:c?keysIn:ue,y=h?void 0:g(e);return Ct(y||e,function(a,i){y&&(a=e[i=a]),Nt(s,i,t(a,r,n,i,e,o))}),s},Lr=1,Ur=4;var Hr=function(t){return Vr(t,Lr|Ur)};const $r=new WeakMap,Br=t=>"function"==typeof t&&$r.has(t),qr=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,Wr=(t,e,r=null)=>{let n=e;for(;n!==r;){const e=n.nextSibling;t.removeChild(n),n=e}},Jr={},Gr={},Kr=`{{lit-${String(Math.random()).slice(2)}}}`,Xr=`\x3c!--${Kr}--\x3e`,Zr=new RegExp(`${Kr}|${Xr}`),Qr="$lit$";class Yr{constructor(t,e){this.parts=[],this.element=e;let r=-1,n=0;const a=[],i=e=>{const o=e.content,s=document.createTreeWalker(o,133,null,!1);let l=0;for(;s.nextNode();){r++;const e=s.currentNode;if(1===e.nodeType){if(e.hasAttributes()){const a=e.attributes;let i=0;for(let t=0;t<a.length;t++)a[t].value.indexOf(Kr)>=0&&i++;for(;i-- >0;){const a=t.strings[n],i=rn.exec(a)[2],o=i.toLowerCase()+Qr,s=e.getAttribute(o).split(Zr);this.parts.push({type:"attribute",index:r,name:i,strings:s}),e.removeAttribute(o),n+=s.length-1}}"TEMPLATE"===e.tagName&&i(e)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(Kr)>=0){const i=e.parentNode,o=t.split(Zr),s=o.length-1;for(let t=0;t<s;t++)i.insertBefore(""===o[t]?en():document.createTextNode(o[t]),e),this.parts.push({type:"node",index:++r});""===o[s]?(i.insertBefore(en(),e),a.push(e)):e.data=o[s],n+=s}}else if(8===e.nodeType)if(e.data===Kr){const t=e.parentNode;null!==e.previousSibling&&r!==l||(r++,t.insertBefore(en(),e)),l=r,this.parts.push({type:"node",index:r}),null===e.nextSibling?e.data="":(a.push(e),r--),n++}else{let t=-1;for(;-1!==(t=e.data.indexOf(Kr,t+1));)this.parts.push({type:"node",index:-1})}}};i(e);for(const t of a)t.parentNode.removeChild(t)}}const tn=t=>-1!==t.index,en=()=>document.createComment(""),rn=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=\/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class nn{constructor(t,e,r){this._parts=[],this.template=t,this.processor=e,this.options=r}update(t){let e=0;for(const r of this._parts)void 0!==r&&r.setValue(t[e]),e++;for(const t of this._parts)void 0!==t&&t.commit()}_clone(){const t=qr?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=this.template.parts;let r=0,n=0;const a=t=>{const i=document.createTreeWalker(t,133,null,!1);let o=i.nextNode();for(;r<e.length&&null!==o;){const t=e[r];if(tn(t))if(n===t.index){if("node"===t.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(o.previousSibling),this._parts.push(t)}else this._parts.push(...this.processor.handleAttributeExpressions(o,t.name,t.strings,this.options));r++}else n++,"TEMPLATE"===o.nodeName&&a(o.content),o=i.nextNode();else this._parts.push(void 0),r++}};return a(t),qr&&(document.adoptNode(t),customElements.upgrade(t)),t}}class an{constructor(t,e,r,n){this.strings=t,this.values=e,this.type=r,this.processor=n}getHTML(){const t=this.strings.length-1;let e="";for(let r=0;r<t;r++){const t=this.strings[r],n=rn.exec(t);e+=n?t.substr(0,n.index)+n[1]+n[2]+Qr+n[3]+Kr:t+Xr}return e+this.strings[t]}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}const on=t=>null===t||!("object"==typeof t||"function"==typeof t);class sn{constructor(t,e,r){this.dirty=!0,this.element=t,this.name=e,this.strings=r,this.parts=[];for(let t=0;t<r.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new ln(this)}_getValue(){const t=this.strings,e=t.length-1;let r="";for(let n=0;n<e;n++){r+=t[n];const e=this.parts[n];if(void 0!==e){const t=e.value;if(null!=t&&(Array.isArray(t)||"string"!=typeof t&&t[Symbol.iterator]))for(const e of t)r+="string"==typeof e?e:String(e);else r+="string"==typeof t?t:String(t)}}return r+=t[e]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class ln{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===Jr||on(t)&&t===this.value||(this.value=t,Br(t)||(this.committer.dirty=!0))}commit(){for(;Br(this.value);){const t=this.value;this.value=Jr,t(this)}this.value!==Jr&&this.committer.commit()}}class cn{constructor(t){this.value=void 0,this._pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(en()),this.endNode=t.appendChild(en())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t._insert(this.startNode=en()),t._insert(this.endNode=en())}insertAfterPart(t){t._insert(this.startNode=en()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this._pendingValue=t}commit(){for(;Br(this._pendingValue);){const t=this._pendingValue;this._pendingValue=Jr,t(this)}const t=this._pendingValue;t!==Jr&&(on(t)?t!==this.value&&this._commitText(t):t instanceof an?this._commitTemplateResult(t):t instanceof Node?this._commitNode(t):Array.isArray(t)||t[Symbol.iterator]?this._commitIterable(t):t===Gr?(this.value=Gr,this.clear()):this._commitText(t))}_insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}_commitNode(t){this.value!==t&&(this.clear(),this._insert(t),this.value=t)}_commitText(t){const e=this.startNode.nextSibling;t=null==t?"":t,e===this.endNode.previousSibling&&3===e.nodeType?e.data=t:this._commitNode(document.createTextNode("string"==typeof t?t:String(t))),this.value=t}_commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof nn&&this.value.template===e)this.value.update(t.values);else{const r=new nn(e,t.processor,this.options),n=r._clone();r.update(t.values),this._commitNode(n),this.value=r}}_commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let r,n=0;for(const a of t)void 0===(r=e[n])&&(r=new cn(this.options),e.push(r),0===n?r.appendIntoPart(this):r.insertAfterPart(e[n-1])),r.setValue(a),r.commit(),n++;n<e.length&&(e.length=n,this.clear(r&&r.endNode))}clear(t=this.startNode){Wr(this.startNode.parentNode,t.nextSibling,this.endNode)}}class un{constructor(t,e,r){if(this.value=void 0,this._pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=r}setValue(t){this._pendingValue=t}commit(){for(;Br(this._pendingValue);){const t=this._pendingValue;this._pendingValue=Jr,t(this)}if(this._pendingValue===Jr)return;const t=!!this._pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=t,this._pendingValue=Jr}}class hn extends sn{constructor(t,e,r){super(t,e,r),this.single=2===r.length&&""===r[0]&&""===r[1]}_createPart(){return new dn(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class dn extends ln{}let fn=!1;try{const t={get capture(){return fn=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}class pn{constructor(t,e,r){this.value=void 0,this._pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=r,this._boundHandleEvent=(t=>this.handleEvent(t))}setValue(t){this._pendingValue=t}commit(){for(;Br(this._pendingValue);){const t=this._pendingValue;this._pendingValue=Jr,t(this)}if(this._pendingValue===Jr)return;const t=this._pendingValue,e=this.value,r=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),n=null!=t&&(null==e||r);r&&this.element.removeEventListener(this.eventName,this._boundHandleEvent,this._options),n&&(this._options=gn(t),this.element.addEventListener(this.eventName,this._boundHandleEvent,this._options)),this.value=t,this._pendingValue=Jr}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const gn=t=>t&&(fn?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);const yn=new class{handleAttributeExpressions(t,e,r,n){const a=e[0];return"."===a?new hn(t,e.slice(1),r).parts:"@"===a?[new pn(t,e.slice(1),n.eventContext)]:"?"===a?[new un(t,e.slice(1),r)]:new sn(t,e,r).parts}handleTextExpression(t){return new cn(t)}};function vn(t){let e=bn.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},bn.set(t.type,e));let r=e.stringsArray.get(t.strings);if(void 0!==r)return r;const n=t.strings.join(Kr);return void 0===(r=e.keyString.get(n))&&(r=new Yr(t,t.getTemplateElement()),e.keyString.set(n,r)),e.stringsArray.set(t.strings,r),r}const bn=new Map,mn=new WeakMap;(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.0.0");const _n=(t,...e)=>new an(t,e,"html",yn),xn=133;function wn(t,e){const{element:{content:r},parts:n}=t,a=document.createTreeWalker(r,xn,null,!1);let i=An(n),o=n[i],s=-1,l=0;const c=[];let u=null;for(;a.nextNode();){s++;const t=a.currentNode;for(t.previousSibling===u&&(u=null),e.has(t)&&(c.push(t),null===u&&(u=t)),null!==u&&l++;void 0!==o&&o.index===s;)o.index=null!==u?-1:o.index-l,o=n[i=An(n,i)]}c.forEach(t=>t.parentNode.removeChild(t))}const Sn=t=>{let e=11===t.nodeType?0:1;const r=document.createTreeWalker(t,xn,null,!1);for(;r.nextNode();)e++;return e},An=(t,e=-1)=>{for(let r=e+1;r<t.length;r++){const e=t[r];if(tn(e))return r}return-1};const kn=(t,e)=>`${t}--${e}`;let jn=!0;void 0===window.ShadyCSS?jn=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected.Please update to at least @webcomponents/webcomponentsjs@2.0.2 and@webcomponents/shadycss@1.3.1."),jn=!1);const Cn=t=>e=>{const r=kn(e.type,t);let n=bn.get(r);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},bn.set(r,n));let a=n.stringsArray.get(e.strings);if(void 0!==a)return a;const i=e.strings.join(Kr);if(void 0===(a=n.keyString.get(i))){const r=e.getTemplateElement();jn&&window.ShadyCSS.prepareTemplateDom(r,t),a=new Yr(e,r),n.keyString.set(i,a)}return n.stringsArray.set(e.strings,a),a},Pn=["html","svg"],Mn=new Set,On=(t,e,r)=>{Mn.add(r);const n=t.querySelectorAll("style");if(0===n.length)return void window.ShadyCSS.prepareTemplateStyles(e.element,r);const a=document.createElement("style");for(let t=0;t<n.length;t++){const e=n[t];e.parentNode.removeChild(e),a.textContent+=e.textContent}if((t=>{Pn.forEach(e=>{const r=bn.get(kn(e,t));void 0!==r&&r.keyString.forEach(t=>{const{element:{content:e}}=t,r=new Set;Array.from(e.querySelectorAll("style")).forEach(t=>{r.add(t)}),wn(t,r)})})})(r),function(t,e,r=null){const{element:{content:n},parts:a}=t;if(null==r)return void n.appendChild(e);const i=document.createTreeWalker(n,xn,null,!1);let o=An(a),s=0,l=-1;for(;i.nextNode();)for(l++,i.currentNode===r&&(s=Sn(e),r.parentNode.insertBefore(e,r));-1!==o&&a[o].index===l;){if(s>0){for(;-1!==o;)a[o].index+=s,o=An(a,o);return}o=An(a,o)}}(e,a,e.element.content.firstChild),window.ShadyCSS.prepareTemplateStyles(e.element,r),window.ShadyCSS.nativeShadow){const r=e.element.content.querySelector("style");t.insertBefore(r.cloneNode(!0),t.firstChild)}else{e.element.content.insertBefore(a,e.element.content.firstChild);const t=new Set;t.add(a),wn(e,t)}};window.JSCompiler_renameProperty=((t,e)=>t);const Nn={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},Fn=(t,e)=>e!==t&&(e==e||t==t),zn={attribute:!0,type:String,converter:Nn,reflect:!1,hasChanged:Fn},En=Promise.resolve(!0),Tn=1,Rn=4,Dn=8,In=16,Vn=32;class Ln extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=En,this._hasConnectedResolver=void 0,this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,r)=>{const n=this._attributeNameForProperty(r,e);void 0!==n&&(this._attributeToPropertyMap.set(n,r),t.push(n))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,e)=>this._classProperties.set(e,t))}}static createProperty(t,e=zn){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const r="symbol"==typeof t?Symbol():`__${t}`;Object.defineProperty(this.prototype,t,{get(){return this[r]},set(e){const n=this[t];this[r]=e,this.requestUpdate(t,n)},configurable:!0,enumerable:!0})}static finalize(){if(this.hasOwnProperty(JSCompiler_renameProperty("finalized",this))&&this.finalized)return;const t=Object.getPrototypeOf(this);if("function"==typeof t.finalize&&t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const r of e)this.createProperty(r,t[r])}}static _attributeNameForProperty(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,r=Fn){return r(t,e)}static _propertyValueFromAttribute(t,e){const r=e.type,n=e.converter||Nn,a="function"==typeof n?n:n.fromAttribute;return a?a(t,r):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const r=e.type,n=e.converter;return(n&&n.toAttribute||Nn.toAttribute)(t,r)}initialize(){this._saveInstanceProperties()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this._updateState=this._updateState|Vn,this._hasConnectedResolver?(this._hasConnectedResolver(),this._hasConnectedResolver=void 0):this.requestUpdate()}disconnectedCallback(){}attributeChangedCallback(t,e,r){e!==r&&this._attributeToProperty(t,r)}_propertyToAttribute(t,e,r=zn){const n=this.constructor,a=n._attributeNameForProperty(t,r);if(void 0!==a){const t=n._propertyValueToAttribute(e,r);if(void 0===t)return;this._updateState=this._updateState|Dn,null==t?this.removeAttribute(a):this.setAttribute(a,t),this._updateState=this._updateState&~Dn}}_attributeToProperty(t,e){if(this._updateState&Dn)return;const r=this.constructor,n=r._attributeToPropertyMap.get(t);if(void 0!==n){const t=r._classProperties.get(n)||zn;this._updateState=this._updateState|In,this[n]=r._propertyValueFromAttribute(e,t),this._updateState=this._updateState&~In}}requestUpdate(t,e){let r=!0;if(void 0!==t&&!this._changedProperties.has(t)){const n=this.constructor,a=n._classProperties.get(t)||zn;n._valueHasChanged(this[t],e,a.hasChanged)?(this._changedProperties.set(t,e),!0!==a.reflect||this._updateState&In||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,a))):r=!1}return!this._hasRequestedUpdate&&r&&this._enqueueUpdate(),this.updateComplete}async _enqueueUpdate(){let t;this._updateState=this._updateState|Rn;const e=this._updatePromise;this._updatePromise=new Promise(e=>t=e),await e,this._hasConnected||await new Promise(t=>this._hasConnectedResolver=t);const r=this.performUpdate();null!=r&&"function"==typeof r.then&&await r,t(!this._hasRequestedUpdate)}get _hasConnected(){return this._updateState&Vn}get _hasRequestedUpdate(){return this._updateState&Rn}get hasUpdated(){return this._updateState&Tn}performUpdate(){if(this._instanceProperties&&this._applyInstanceProperties(),this.shouldUpdate(this._changedProperties)){const t=this._changedProperties;this.update(t),this._markUpdated(),this._updateState&Tn||(this._updateState=this._updateState|Tn,this.firstUpdated(t)),this.updated(t)}else this._markUpdated()}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~Rn}get updateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,e)=>this._propertyToAttribute(e,this[e],t)),this._reflectingProperties=void 0)}updated(t){}firstUpdated(t){}}Ln.finalized=!0;const Un="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;(window.litElementVersions||(window.litElementVersions=[])).push("2.0.1");const Hn=t=>t.flat?t.flat(1/0):function t(e,r=[]){for(let n=0,a=e.length;n<a;n++){const a=e[n];Array.isArray(a)?t(a,r):r.push(a)}return r}(t);class $n extends Ln{static finalize(){super.finalize(),this._styles=this.hasOwnProperty(JSCompiler_renameProperty("styles",this))?this._getUniqueStyles():this._styles||[]}static _getUniqueStyles(){const t=this.styles,e=[];if(Array.isArray(t)){Hn(t).reduceRight((t,e)=>(t.add(e),t),new Set).forEach(t=>e.unshift(t))}else t&&e.push(t);return e}initialize(){super.initialize(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Un?this.renderRoot.adoptedStyleSheets=t.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(t=>t.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){super.update(t);const e=this.render();e instanceof an&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)}))}render(){}}$n.finalized=!0,$n.render=((t,e,r)=>{const n=r.scopeName,a=mn.has(e),i=e instanceof ShadowRoot&&jn&&t instanceof an,o=i&&!Mn.has(n),s=o?document.createDocumentFragment():e;if(((t,e,r)=>{let n=mn.get(e);void 0===n&&(Wr(e,e.firstChild),mn.set(e,n=new cn(Object.assign({templateFactory:vn},r))),n.appendInto(e)),n.setValue(t),n.commit()})(t,s,Object.assign({templateFactory:Cn(n)},r)),o){const t=mn.get(s);mn.delete(s),t.value instanceof nn&&On(s,t.value.template,n),Wr(e,e.firstChild),e.appendChild(s),mn.set(e,t)}!a&&i&&window.ShadyCSS.styleElement(e.host)});var Bn={id:"data-binder",beforeUpdate:function(t){if(t.data.rawData){t.data.rawData=function(t,e){if(!t)return null;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){return console.warn("invalid chart data format",t),null}if(!(t instanceof Array))return t instanceof Object?t:null;if(0===t.length)return null;t[0].hasOwnProperty("__field1")&&(t=function(t){if(!t||0===t.length)return null;var e={},r=[];for(var n in t[0])e[n]=t[0][n];for(var a=1;a<t.length;a++){var i={},o=t[a];for(var s in e){var l=e[s],c=o[s];i[l]=c}r.push(i)}return r}(t));var r=e.data.labelDataKey,n=[];for(var a in e.data.datasets)n.push(e.data.datasets[a].dataKey);var i=[],o=[],s={seriesData:i,labelData:o};for(var l in t){var c=t[l];for(var u in o.push(c[r]),n)n[u]&&(i[u]||(i[u]=[]),NaN==Number(c[n[u]])&&(c[n[u]]=NaN),i[u].push(c[n[u]]))}return s}(t.data.rawData,t);t.data.rawData.seriesData;!function(t){var e=t.data.rawData.labelData;t.config.data.labels=e||[]}(t),function(t){if(t.data.rawData){var e=t.data.rawData.seriesData;for(var r in t.id,e&&0!==e.length||(e=[null]),t.data.datasets)t.data.datasets[r].data=e[r]||[]}}(t)}}};function qn(t,e){(function(t){return"string"==typeof t&&-1!==t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!==t.indexOf("%")}(t);return t=360===e?t:Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:t=360===e?(t<0?t%e+e:t%e)/parseFloat(String(e)):t%e/parseFloat(String(e))}function Wn(t){return Math.min(1,Math.max(0,t))}function Jn(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Gn(t){return t<=1?100*+t+"%":t}function Kn(t){return 1===t.length?"0"+t:""+t}function Xn(t,e,r){t=qn(t,255),e=qn(e,255),r=qn(r,255);var n=Math.max(t,e,r),a=Math.min(t,e,r),i=0,o=0,s=(n+a)/2;if(n===a)i=o=0;else{var l=n-a;switch(o=s>.5?l/(2-n-a):l/(n+a),n){case t:i=(e-r)/l+(e<r?6:0);break;case e:i=(r-t)/l+2;break;case r:i=(t-e)/l+4}i/=6}return{h:i,s:o,l:s}}function Zn(t,e,r){t=qn(t,255),e=qn(e,255),r=qn(r,255);var n=Math.max(t,e,r),a=Math.min(t,e,r),i=0,o=n,s=n-a,l=0===n?0:s/n;if(n===a)i=0;else{switch(n){case t:i=(e-r)/s+(e<r?6:0);break;case e:i=(r-t)/s+2;break;case r:i=(t-e)/s+4}i/=6}return{h:i,s:l,v:o}}function Qn(t,e,r,n){var a=[Kn(Math.round(t).toString(16)),Kn(Math.round(e).toString(16)),Kn(Math.round(r).toString(16))];return n&&a[0].charAt(0)===a[0].charAt(1)&&a[1].charAt(0)===a[1].charAt(1)&&a[2].charAt(0)===a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function Yn(t){return ta(t)/255}function ta(t){return parseInt(t,16)}var ea={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ra(t){var e,r,n,a={r:0,g:0,b:0},i=1,o=null,s=null,l=null,c=!1,u=!1;return"string"==typeof t&&(t=function(t){if(0===(t=t.trim().toLowerCase()).length)return!1;var e=!1;if(ea[t])t=ea[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var r=oa.rgb.exec(t);if(r)return{r:r[1],g:r[2],b:r[3]};if(r=oa.rgba.exec(t))return{r:r[1],g:r[2],b:r[3],a:r[4]};if(r=oa.hsl.exec(t))return{h:r[1],s:r[2],l:r[3]};if(r=oa.hsla.exec(t))return{h:r[1],s:r[2],l:r[3],a:r[4]};if(r=oa.hsv.exec(t))return{h:r[1],s:r[2],v:r[3]};if(r=oa.hsva.exec(t))return{h:r[1],s:r[2],v:r[3],a:r[4]};if(r=oa.hex8.exec(t))return{r:ta(r[1]),g:ta(r[2]),b:ta(r[3]),a:Yn(r[4]),format:e?"name":"hex8"};if(r=oa.hex6.exec(t))return{r:ta(r[1]),g:ta(r[2]),b:ta(r[3]),format:e?"name":"hex"};if(r=oa.hex4.exec(t))return{r:ta(r[1]+r[1]),g:ta(r[2]+r[2]),b:ta(r[3]+r[3]),a:Yn(r[4]+r[4]),format:e?"name":"hex8"};if(r=oa.hex3.exec(t))return{r:ta(r[1]+r[1]),g:ta(r[2]+r[2]),b:ta(r[3]+r[3]),format:e?"name":"hex"};return!1}(t)),"object"==typeof t&&(sa(t.r)&&sa(t.g)&&sa(t.b)?(e=t.r,r=t.g,n=t.b,a={r:255*qn(e,255),g:255*qn(r,255),b:255*qn(n,255)},c=!0,u="%"===String(t.r).substr(-1)?"prgb":"rgb"):sa(t.h)&&sa(t.s)&&sa(t.v)?(o=Gn(t.s),s=Gn(t.v),a=function(t,e,r){t=6*qn(t,360),e=qn(e,100),r=qn(r,100);var n=Math.floor(t),a=t-n,i=r*(1-e),o=r*(1-a*e),s=r*(1-(1-a)*e),l=n%6;return{r:255*[r,o,i,i,s,r][l],g:255*[s,r,r,o,i,i][l],b:255*[i,i,s,r,r,o][l]}}(t.h,o,s),c=!0,u="hsv"):sa(t.h)&&sa(t.s)&&sa(t.l)&&(o=Gn(t.s),l=Gn(t.l),a=function(t,e,r){var n,a,i;function o(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=qn(t,360),e=qn(e,100),r=qn(r,100),0===e)n=a=i=r;else{var s=r<.5?r*(1+e):r+e-r*e,l=2*r-s;n=o(l,s,t+1/3),a=o(l,s,t),i=o(l,s,t-1/3)}return{r:255*n,g:255*a,b:255*i}}(t.h,o,l),c=!0,u="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=Jn(i),{ok:c,format:t.format||u,r:Math.min(255,Math.max(a.r,0)),g:Math.min(255,Math.max(a.g,0)),b:Math.min(255,Math.max(a.b,0)),a:i}}var na="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",aa="[\\s|\\(]+("+na+")[,|\\s]+("+na+")[,|\\s]+("+na+")\\s*\\)?",ia="[\\s|\\(]+("+na+")[,|\\s]+("+na+")[,|\\s]+("+na+")[,|\\s]+("+na+")\\s*\\)?",oa={CSS_UNIT:new RegExp(na),rgb:new RegExp("rgb"+aa),rgba:new RegExp("rgba"+ia),hsl:new RegExp("hsl"+aa),hsla:new RegExp("hsla"+ia),hsv:new RegExp("hsv"+aa),hsva:new RegExp("hsva"+ia),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function sa(t){return!!oa.CSS_UNIT.exec(String(t))}var la=function(){function t(e,r){if(void 0===e&&(e=""),void 0===r&&(r={}),e instanceof t)return e;this.originalInput=e;var n=ra(e);this.originalInput=e,this.r=n.r,this.g=n.g,this.b=n.b,this.a=n.a,this.roundA=Math.round(100*this.a)/100,this.format=r.format||n.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=n.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},t.prototype.getLuminance=function(){var t=this.toRgb(),e=t.r/255,r=t.g/255,n=t.b/255;return.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},t.prototype.setAlpha=function(t){return this.a=Jn(t),this.roundA=Math.round(100*this.a)/100,this},t.prototype.toHsv=function(){var t=Zn(this.r,this.g,this.b);return{h:360*t.h,s:t.s,v:t.v,a:this.a}},t.prototype.toHsvString=function(){var t=Zn(this.r,this.g,this.b),e=Math.round(360*t.h),r=Math.round(100*t.s),n=Math.round(100*t.v);return 1===this.a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this.roundA+")"},t.prototype.toHsl=function(){var t=Xn(this.r,this.g,this.b);return{h:360*t.h,s:t.s,l:t.l,a:this.a}},t.prototype.toHslString=function(){var t=Xn(this.r,this.g,this.b),e=Math.round(360*t.h),r=Math.round(100*t.s),n=Math.round(100*t.l);return 1===this.a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this.roundA+")"},t.prototype.toHex=function(t){return void 0===t&&(t=!1),Qn(this.r,this.g,this.b,t)},t.prototype.toHexString=function(t){return void 0===t&&(t=!1),"#"+this.toHex(t)},t.prototype.toHex8=function(t){return void 0===t&&(t=!1),function(t,e,r,n,a){var i,o=[Kn(Math.round(t).toString(16)),Kn(Math.round(e).toString(16)),Kn(Math.round(r).toString(16)),Kn((i=n,Math.round(255*parseFloat(i)).toString(16)))];return a&&o[0].charAt(0)===o[0].charAt(1)&&o[1].charAt(0)===o[1].charAt(1)&&o[2].charAt(0)===o[2].charAt(1)&&o[3].charAt(0)===o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this.r,this.g,this.b,this.a,t)},t.prototype.toHex8String=function(t){return void 0===t&&(t=!1),"#"+this.toHex8(t)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),r=Math.round(this.b);return 1===this.a?"rgb("+t+", "+e+", "+r+")":"rgba("+t+", "+e+", "+r+", "+this.roundA+")"},t.prototype.toPercentageRgb=function(){var t=function(t){return Math.round(100*qn(t,255))+"%"};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var t=function(t){return Math.round(100*qn(t,255))};return 1===this.a?"rgb("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%)":"rgba("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%, "+this.roundA+")"},t.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var t="#"+Qn(this.r,this.g,this.b,!1),e=0,r=Object.keys(ea);e<r.length;e++){var n=r[e];if(ea[n]===t)return n}return!1},t.prototype.toString=function(t){var e=!!t;t=t||this.format;var r=!1,n=this.a<1&&this.a>=0;return e||!n||!t.startsWith("hex")&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this.a?this.toName():this.toRgbString()},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){void 0===e&&(e=10);var r=this.toHsl();return r.l+=e/100,r.l=Wn(r.l),new t(r)},t.prototype.brighten=function(e){void 0===e&&(e=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-e/100*255))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-e/100*255))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-e/100*255))),new t(r)},t.prototype.darken=function(e){void 0===e&&(e=10);var r=this.toHsl();return r.l-=e/100,r.l=Wn(r.l),new t(r)},t.prototype.tint=function(t){return void 0===t&&(t=10),this.mix("white",t)},t.prototype.shade=function(t){return void 0===t&&(t=10),this.mix("black",t)},t.prototype.desaturate=function(e){void 0===e&&(e=10);var r=this.toHsl();return r.s-=e/100,r.s=Wn(r.s),new t(r)},t.prototype.saturate=function(e){void 0===e&&(e=10);var r=this.toHsl();return r.s+=e/100,r.s=Wn(r.s),new t(r)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var r=this.toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,new t(r)},t.prototype.mix=function(e,r){void 0===r&&(r=50);var n=this.toRgb(),a=new t(e).toRgb(),i=r/100;return new t({r:(a.r-n.r)*i+n.r,g:(a.g-n.g)*i+n.g,b:(a.b-n.b)*i+n.b,a:(a.a-n.a)*i+n.a})},t.prototype.analogous=function(e,r){void 0===e&&(e=6),void 0===r&&(r=30);var n=this.toHsl(),a=360/r,i=[this];for(n.h=(n.h-(a*e>>1)+720)%360;--e;)n.h=(n.h+a)%360,i.push(new t(n));return i},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){void 0===e&&(e=6);for(var r=this.toHsv(),n=r.h,a=r.s,i=r.v,o=[],s=1/e;e--;)o.push(new t({h:n,s:a,v:i})),i=(i+s)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),r=e.h;return[this,new t({h:(r+72)%360,s:e.s,l:e.l}),new t({h:(r+216)%360,s:e.s,l:e.l})]},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var r=this.toHsl(),n=r.h,a=[this],i=360/e,o=1;o<e;o++)a.push(new t({h:(n+o*i)%360,s:r.s,l:r.l}));return a},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function ca(t){if(t){var e,r,n,a=(t.data||{}).datasets||[],i=t.options||{},o=i.scales||{},s=i.legend||{},l=i.tooltips=i.tooltips||{},c=i.multiAxis,u=[!1,!1],h=Number(i.defaultFontSize),d=i.defaultFontFamily,f=i.theme;for(var p in function(t,e){switch(t){case"horizontalBar":e.scales||(e.scales={});break;case"line":case"bar":if(e.scales||(e.scales={}),e.scales.yAxes||(e.scales.yAxes=[]),1===e.scales.yAxes.length){var r=e.scales.yAxes;r.push({position:"right",id:"right",display:e.multiAxis||!1,gridLines:{display:r[0]&&r[0].gridLines&&r[0].gridLines.display||!1},ticks:{beginAtZero:!1,callback:function(t,e,r){var n=t;return"number"==typeof n&&(n=n.toLocaleString()),n}}})}break;case"pie":case"doughnut":break;default:e.scale||(e.scale={})}}(t.type,i),a){var g=a[p];i.stacked&&!g.stack&&(g.stack="A"),ba(g,t),c||"right"==g.yAxisID&&(g.yAxisID="left")}delete i.stacked;var y=a.filter(t=>"left"==t.yAxisID),v=a.filter(t=>"right"==t.yAxisID);switch(y.forEach(t=>{y.filter(e=>t.stack==e.stack).length>1&&(u[0]=!0)}),v.forEach(t=>{v.filter(e=>t.stack==e.stack).length>1&&(u[1]=!0)}),n=u[0]||u[1],t.type){case"line":case"bar":case"horizontalBar":for(var b in e=o.xAxes||[],r=o.yAxes||[],"horizontalBar"==t.type&&(e=o.yAxes||[],r=o.xAxes||[]),e){var m=e[b];ua(m,n),fa(m,{fontSize:h,fontFamily:d}),pa(m),ga(m),da(m),ya(m,f),ma(m.ticks),m.categoryPercentage=1-m.categorySpacing||1,m.barPercentage=1-m.barSpacing||.8,m.gridLines.display=i.xGridLine}for(var _ in r){var x=r[_];1==_&&ha(x,c),ua(x,u[_]),fa(x,{fontSize:h,fontFamily:d}),pa(x),da(x),ya(x,f),ma(x.ticks),0==_&&(x.gridLines.display=i.yGridLine),1==_&&(x.gridLines.display=i.y2ndGridLine),x.categoryPercentage=1-x.categorySpacing||1,x.barPercentage=1-x.barSpacing||.8}break;case"pie":case"doughnut":break;default:fa(i.scale||{},{fontSize:h,fontFamily:d})}!function(t,{fontFamily:e,fontSize:r}){t.labels=t.labels?t.labels:{},t.labels.fontSize=r,e&&(t.labels.fontFamily=e)}(s,{fontSize:h,fontFamily:d}),s.labels.boxWidth=15,function(t,e){var r=va(e);t.labels=t.labels?t.labels:{},t.labels.fontColor=r.clone().setAlpha(.5).toString()}(s,f),function(t,{fontSize:e,fontFamily:r}){t.titleFontSize=t.bodyFontSize=t.footerFontSize=e,r&&(t.titleFontFamily=t.bodyFontFamily=t.footerFontFamily=r)}(l,{fontSize:h,fontFamily:d}),function(t){t.callbacks=t.callbacks||{},t.intersect=!1,t.mode="index",t.callbacks.label=function(t,e){var r=e.datasets[t.datasetIndex].data[t.index],n=e.datasets[t.datasetIndex].label,a=n||e.labels[t.index],i=Number(r);isNaN(i)||(r=i),r&&(r=r.toLocaleString());var o=e.datasets[t.datasetIndex].valuePrefix||"",s=e.datasets[t.datasetIndex].valueSuffix||"";return`${a}: ${o+r+s}`}}(l)}}function ua(t,e){t.stacked=e}function ha(t,e){t.display=e}function da(t){t.scaleLabel||(t.scaleLabel={}),t.scaleLabel.labelString=t.axisTitle,t.scaleLabel.display=!!t.axisTitle}function fa(t,{fontSize:e,fontFamily:r}){t.ticks=t.ticks?t.ticks:{},t.ticks.fontSize=e,r&&(t.ticks.fontFamily=r),t.pointLabels=t.pointLabels||{},t.pointLabels.fontSize=e,r&&(t.pointLabels.fontFamily=r)}function pa(t){t.ticks=t.ticks?t.ticks:{};var e=t.ticks.autoMin,r=t.ticks.autoMax;!0===e&&delete t.ticks.min,!0===r&&delete t.ticks.max}function ga(t){t.ticks=t.ticks?t.ticks:{},t.ticks.maxRotation=0}function ya(t,e){var r=va(e);t.gridLines=t.gridLines?t.gridLines:{},t.gridLines.zeroLineColor=r.clone().setAlpha(.5).toString(),t.gridLines.color=r.clone().setAlpha(.1).toString(),t.ticks=t.ticks?t.ticks:{},t.ticks.fontColor=r.clone().setAlpha(.5).toString()}function va(t){var e;switch(t){case"light":e="#fff";break;case"dark":default:e="#000"}return e=new la(e)}function ba(t,e){var r=t.type||e.type,n=`${r} ${t.yAxisID} ${t.stack||t.dataKey}`,a=t.color?t.color:t.backgroundColor;switch(r){case"bar":case"horizontalBar":t.borderColor=t.backgroundColor=a;break;case"line":case"radar":a=t.color?t.color:t.borderColor,t.pointBackgroundColor=t.pointBorderColor=t.borderColor=t.backgroundColor=a,t.pointBorderWidth=.5*t.borderWidth,t.pointHoverRadius=t.pointRadius,null==t.fill&&(t.fill=!1);break;default:t.borderColor=t.backgroundColor=a}t.stack=n}function ma(t){t.callback=function(t,e,r){var n=Number(t);if(n=Number.isNaN(n)?t:n.toLocaleString())return n}}b(function(t,e){t.exports=function(t){var e=(t=t&&t.hasOwnProperty("default")?t.default:t).helpers,r=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),n={toTextLines:function(t){var r,n=[];for(t=[].concat(t);t.length;)"string"==typeof(r=t.pop())?n.unshift.apply(n,r.split("\n")):Array.isArray(r)?t.push.apply(t,r):e.isNullOrUndef(t)||n.unshift(""+r);return n},toFontString:function(t){return!t||e.isNullOrUndef(t.size)||e.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(t,e,r){var n,a=[].concat(e),i=a.length,o=t.font,s=0;for(t.font=r.string,n=0;n<i;++n)s=Math.max(t.measureText(a[n]).width,s);return t.font=o,{height:i*r.lineHeight,width:s}},parseFont:function(r){var a=t.defaults.global,i=e.valueOrDefault(r.size,a.defaultFontSize),o={family:e.valueOrDefault(r.family,a.defaultFontFamily),lineHeight:e.options.toLineHeight(r.lineHeight,i),size:i,style:e.valueOrDefault(r.style,a.defaultFontStyle),weight:e.valueOrDefault(r.weight,null),string:""};return o.string=n.toFontString(o),o},bound:function(t,e,r){return Math.max(t,Math.min(e,r))},arrayDiff:function(t,e){var r,n,a,i,o=t.slice(),s=[];for(r=0,a=e.length;r<a;++r)i=e[r],-1===(n=o.indexOf(i))?s.push([i,1]):o.splice(n,1);for(r=0,a=o.length;r<a;++r)s.push([o[r],-1]);return s},rasterize:function(t){return Math.round(t*r)/r}};function a(t,e){var r=e.x,n=e.y;if(null===r)return{x:0,y:-1};if(null===n)return{x:1,y:0};var a=t.x-r,i=t.y-n,o=Math.sqrt(a*a+i*i);return{x:o?a/o:0,y:o?i/o:-1}}var i=0,o=1,s=2,l=4,c=8;function u(t,e,r){var n=i;return t<r.left?n|=o:t>r.right&&(n|=s),e<r.top?n|=c:e>r.bottom&&(n|=l),n}function h(t,e){var r,n,a=e.anchor,i=t;return e.clamp&&(i=function(t,e){for(var r,n,a,i=t.x0,h=t.y0,d=t.x1,f=t.y1,p=u(i,h,e),g=u(d,f,e);p|g&&!(p&g);)(r=p||g)&c?(n=i+(d-i)*(e.top-h)/(f-h),a=e.top):r&l?(n=i+(d-i)*(e.bottom-h)/(f-h),a=e.bottom):r&s?(a=h+(f-h)*(e.right-i)/(d-i),n=e.right):r&o&&(a=h+(f-h)*(e.left-i)/(d-i),n=e.left),r===p?p=u(i=n,h=a,e):g=u(d=n,f=a,e);return{x0:i,x1:d,y0:h,y1:f}}(i,e.area)),"start"===a?(r=i.x0,n=i.y0):"end"===a?(r=i.x1,n=i.y1):(r=(i.x0+i.x1)/2,n=(i.y0+i.y1)/2),function(t,e,r,n,a){switch(a){case"center":r=n=0;break;case"bottom":r=0,n=1;break;case"right":r=1,n=0;break;case"left":r=-1,n=0;break;case"top":r=0,n=-1;break;case"start":r=-r,n=-n;break;case"end":break;default:a*=Math.PI/180,r=Math.cos(a),n=Math.sin(a)}return{x:t,y:e,vx:r,vy:n}}(r,n,t.vx,t.vy,e.align)}var d={arc:function(t,e){var r=(t.startAngle+t.endAngle)/2,n=Math.cos(r),a=Math.sin(r),i=t.innerRadius,o=t.outerRadius;return h({x0:t.x+n*i,y0:t.y+a*i,x1:t.x+n*o,y1:t.y+a*o,vx:n,vy:a},e)},point:function(t,e){var r=a(t,e.origin),n=r.x*t.radius,i=r.y*t.radius;return h({x0:t.x-n,y0:t.y-i,x1:t.x+n,y1:t.y+i,vx:r.x,vy:r.y},e)},rect:function(t,e){var r=a(t,e.origin),n=t.x,i=t.y,o=0,s=0;return t.horizontal?(n=Math.min(t.x,t.base),o=Math.abs(t.base-t.x)):(i=Math.min(t.y,t.base),s=Math.abs(t.base-t.y)),h({x0:n,y0:i+s,x1:n+o,y1:i,vx:r.x,vy:r.y},e)},fallback:function(t,e){var r=a(t,e.origin);return h({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:r.x,vy:r.y},e)}},f=t.helpers,p=n.rasterize;function g(t){var e=t._model.horizontal,r=t._scale||e&&t._xScale||t._yScale;if(!r)return null;if(void 0!==r.xCenter&&void 0!==r.yCenter)return{x:r.xCenter,y:r.yCenter};var n=r.getBasePixel();return e?{x:n,y:null}:{x:null,y:n}}function y(t,e,r){var n=t.shadowBlur,a=r.stroked,i=p(r.x),o=p(r.y),s=p(r.w);a&&t.strokeText(e,i,o,s),r.filled&&(n&&a&&(t.shadowBlur=0),t.fillText(e,i,o,s),n&&a&&(t.shadowBlur=n))}var v=function(t,e,r,n){var a=this;a._config=t,a._index=n,a._model=null,a._rects=null,a._ctx=e,a._el=r};f.extend(v.prototype,{_modelize:function(e,r,a,i){var o,s=this._index,l=f.options.resolve,c=n.parseFont(l([a.font,{}],i,s)),u=l([a.color,t.defaults.global.defaultFontColor],i,s);return{align:l([a.align,"center"],i,s),anchor:l([a.anchor,"center"],i,s),area:i.chart.chartArea,backgroundColor:l([a.backgroundColor,null],i,s),borderColor:l([a.borderColor,null],i,s),borderRadius:l([a.borderRadius,0],i,s),borderWidth:l([a.borderWidth,0],i,s),clamp:l([a.clamp,!1],i,s),clip:l([a.clip,!1],i,s),color:u,display:e,font:c,lines:r,offset:l([a.offset,0],i,s),opacity:l([a.opacity,1],i,s),origin:g(this._el),padding:f.options.toPadding(l([a.padding,0],i,s)),positioner:(o=this._el,o instanceof t.elements.Arc?d.arc:o instanceof t.elements.Point?d.point:o instanceof t.elements.Rectangle?d.rect:d.fallback),rotation:l([a.rotation,0],i,s)*(Math.PI/180),size:n.textSize(this._ctx,r,c),textAlign:l([a.textAlign,"start"],i,s),textShadowBlur:l([a.textShadowBlur,0],i,s),textShadowColor:l([a.textShadowColor,u],i,s),textStrokeColor:l([a.textStrokeColor,u],i,s),textStrokeWidth:l([a.textStrokeWidth,0],i,s)}},update:function(t){var e,r,a,i=this,o=null,s=null,l=i._index,c=i._config,u=f.options.resolve([c.display,!0],t,l);u&&(e=t.dataset.data[l],r=f.valueOrDefault(f.callback(c.formatter,[e,t]),e),(a=f.isNullOrUndef(r)?[]:n.toTextLines(r)).length&&(o=i._modelize(u,a,c,t),s=function(t){var e=t.borderWidth||0,r=t.padding,n=t.size.height,a=t.size.width,i=-a/2,o=-n/2;return{frame:{x:i-r.left-e,y:o-r.top-e,w:a+r.width+2*e,h:n+r.height+2*e},text:{x:i,y:o,w:a,h:n}}}(o))),i._model=o,i._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var r,a=t.ctx,i=this._model,o=this._rects;this.visible()&&(a.save(),i.clip&&(r=i.area,a.beginPath(),a.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),a.clip()),a.globalAlpha=n.bound(0,i.opacity,1),a.translate(p(e.x),p(e.y)),a.rotate(i.rotation),function(t,e,r){var n=r.backgroundColor,a=r.borderColor,i=r.borderWidth;(n||a&&i)&&(t.beginPath(),f.canvas.roundedRect(t,p(e.x)+i/2,p(e.y)+i/2,p(e.w)-i,p(e.h)-i,r.borderRadius),t.closePath(),n&&(t.fillStyle=n,t.fill()),a&&i&&(t.strokeStyle=a,t.lineWidth=i,t.lineJoin="miter",t.stroke()))}(a,o.frame,i),function(t,e,r,n){var a,i=n.textAlign,o=n.color,s=!!o,l=n.font,c=e.length,u=n.textStrokeColor,h=n.textStrokeWidth,d=u&&h;if(c&&(s||d))for(r=function(t,e,r){var n=r.lineHeight,a=t.w,i=t.x,o=t.y+n/2;return"center"===e?i+=a/2:"end"!==e&&"right"!==e||(i+=a),{h:n,w:a,x:i,y:o}}(r,i,l),t.font=l.string,t.textAlign=i,t.textBaseline="middle",t.shadowBlur=n.textShadowBlur,t.shadowColor=n.textShadowColor,s&&(t.fillStyle=o),d&&(t.lineJoin="round",t.lineWidth=h,t.strokeStyle=u),a=0,c=e.length;a<c;++a)y(t,e[a],{stroked:d,filled:s,w:r.w,x:r.x,y:r.y+r.h*a})}(a,i.lines,o.text,i),a.restore())}});var b=t.helpers,m=Number.MIN_SAFE_INTEGER||-9007199254740991,_=Number.MAX_SAFE_INTEGER||9007199254740991;function x(t,e,r){var n=Math.cos(r),a=Math.sin(r),i=e.x,o=e.y;return{x:i+n*(t.x-i)-a*(t.y-o),y:o+a*(t.x-i)+n*(t.y-o)}}function w(t,e){var r,n,a,i,o,s=_,l=m,c=e.origin;for(r=0;r<t.length;++r)n=t[r],a=n.x-c.x,i=n.y-c.y,o=e.vx*a+e.vy*i,s=Math.min(s,o),l=Math.max(l,o);return{min:s,max:l}}function S(t,e){var r=e.x-t.x,n=e.y-t.y,a=Math.sqrt(r*r+n*n);return{vx:(e.x-t.x)/a,vy:(e.y-t.y)/a,origin:t,ln:a}}var A=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function k(t,e,r){var n=e.positioner(t,e),a=n.vx,i=n.vy;if(!a&&!i)return{x:n.x,y:n.y};var o=r.w,s=r.h,l=e.rotation,c=Math.abs(o/2*Math.cos(l))+Math.abs(s/2*Math.sin(l)),u=Math.abs(o/2*Math.sin(l))+Math.abs(s/2*Math.cos(l)),h=1/Math.max(Math.abs(a),Math.abs(i));return c*=a*h,u*=i*h,c+=e.offset*a,u+=e.offset*i,{x:n.x+c,y:n.y+u}}b.extend(A.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,r){this._rotation=r,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this._rect;return!((t=x(t,this.center(),-this._rotation)).x<e.x-1||t.y<e.y-1||t.x>e.x+e.w+2||t.y>e.y+e.h+2)},intersects:function(t){var e,r,n,a=this._points(),i=t._points(),o=[S(a[0],a[1]),S(a[0],a[3])];for(this._rotation!==t._rotation&&o.push(S(i[0],i[1]),S(i[0],i[3])),e=0;e<o.length;++e)if(r=w(a,o[e]),n=w(i,o[e]),r.max<n.min||n.max<r.min)return!1;return!0},_points:function(){var t=this._rect,e=this._rotation,r=this.center();return[x({x:t.x,y:t.y},r,e),x({x:t.x+t.w,y:t.y},r,e),x({x:t.x+t.w,y:t.y+t.h},r,e),x({x:t.x,y:t.y+t.h},r,e)]}});var j={prepare:function(t){var e,r,n,a,i,o=[];for(e=0,n=t.length;e<n;++e)for(r=0,a=t[e].length;r<a;++r)i=t[e][r],o.push(i),i.$layout={_box:new A,_hidable:!1,_visible:!0,_set:e,_idx:r};return o.sort(function(t,e){var r=t.$layout,n=e.$layout;return r._idx===n._idx?r._set-n._set:n._idx-r._idx}),this.update(o),o},update:function(t){var e,r,n,a,i,o=!1;for(e=0,r=t.length;e<r;++e)n=t[e],a=n.model(),(i=n.$layout)._hidable=a&&"auto"===a.display,i._visible=n.visible(),o|=i._hidable;o&&function(t){var e,r,n,a,i,o;for(e=0,r=t.length;e<r;++e)n=t[e],(a=n.$layout)._visible&&(i=n.geometry(),o=k(n._el._model,n.model(),i),a._box.update(o,i,n.rotation()));!function(t,e){var r,n,a,i;for(r=t.length-1;r>=0;--r)for(a=t[r].$layout,n=r-1;n>=0&&a._visible;--n)(i=t[n].$layout)._visible&&a._box.intersects(i._box)&&e(a,i)}(t,function(t,e){var r=t._hidable,n=e._hidable;r&&n||n?e._visible=!1:r&&(t._visible=!1)})}(t)},lookup:function(t,e){var r,n;for(r=t.length-1;r>=0;--r)if((n=t[r].$layout)&&n._visible&&n._box.contains(e))return{dataset:n._set,label:t[r]};return null},draw:function(t,e){var r,n,a,i,o,s;for(r=0,n=e.length;r<n;++r)a=e[r],(i=a.$layout)._visible&&(o=a.geometry(),s=k(a._el._view,a.model(),o),i._box.update(s,o,a.rotation()),a.draw(t,s))}},C=t.helpers,P={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(C.isNullOrUndef(t))return null;var e,r,n,a=t;if(C.isObject(t))if(C.isNullOrUndef(t.label))if(C.isNullOrUndef(t.r))for(a="",e=Object.keys(t),n=0,r=e.length;n<r;++n)a+=(0!==n?", ":"")+e[n]+": "+t[e[n]];else a=t.r;else a=t.label;return""+a},listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},M=t.helpers,O="$datalabels";function N(t,e,r){var n=e&&e[r.dataset];if(n){var a=r.label,i=a.$context;!0===M.callback(n,[i])&&(t[O]._dirty=!0,a.update(i))}}function F(t,e){var r,n,a=t[O],i=a._listeners;if(i.enter||i.leave){if("mousemove"===e.type)n=j.lookup(a._labels,e);else if("mouseout"!==e.type)return;r=a._hovered,a._hovered=n,function(t,e,r,n){var a,i;(r||n)&&(r?n?r.label!==n.label&&(i=a=!0):i=!0:a=!0,i&&N(t,e.leave,r),a&&N(t,e.enter,n))}(t,i,r,n)}}t.defaults.global.plugins.datalabels=P,t.defaults.global.plugins.datalabels=P;var z={id:"datalabels",beforeInit:function(t){t[O]={_actives:[]}},beforeUpdate:function(t){var e=t[O];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,r){var n,a,i,o=e.index,s=t[O],l=s._datasets[o]=[],c=t.isDatasetVisible(o),u=t.data.datasets[o],h=function(t,e){var r=t.datalabels;return!1===r?null:(!0===r&&(r={}),M.merge({},[e,r]))}(u,r),d=e.meta.data||[],f=d.length,p=t.ctx;for(p.save(),n=0;n<f;++n)a=d[n],c&&a&&!a.hidden&&!a._model.skip?(l.push(i=new v(h,p,a,n)),i.update(i.$context={active:!1,chart:t,dataIndex:n,dataset:u,datasetIndex:o})):i=null,a[O]=i;p.restore(),M.merge(s._listeners,h.listeners||{},{merger:function(t,r,n){r[t]=r[t]||{},r[t][e.index]=n[t],s._listened=!0}})},afterUpdate:function(t,e){t[O]._labels=j.prepare(t[O]._datasets,e)},afterDatasetsDraw:function(t){j.draw(t,t[O]._labels)},beforeEvent:function(t,e){if(t[O]._listened)switch(e.type){case"mousemove":case"mouseout":F(t,e);break;case"click":!function(t,e){var r=t[O],n=r._listeners.click,a=n&&j.lookup(r._labels,e);a&&N(t,n,a)}(t,e)}},afterEvent:function(t){var e,r,a,i,o=t[O],s=o._actives,l=o._actives=t.lastActive||[],c=n.arrayDiff(s,l);for(e=0,r=c.length;e<r;++e)(a=c[e])[1]&&(i=a[0][O])&&(i.$context.active=1===a[1],i.update(i.$context));(o._dirty||c.length)&&(j.update(o._labels),t.animating||t.render()),delete o._dirty}};return t.plugins.register(z),z}(r)});e.Chart.plugins.register(Bn);class _a extends $n{static get is(){return"things-chartjs"}static get properties(){return{width:Number,height:Number,options:Object,data:Array}}get initialized(){return this._initialized}set initialized(t){this._initialized=t}firstUpdated(){this.initChart()}render(){return _n`
      <canvas id="chart"></canvas>
    `}updated(t){(t.has("width")||t.has("height"))&&this.updateChartSize(),t.has("options")&&this.updateChartConfig(),t.has("data")&&(this.chart.data.rawData=this.data,this.chart.update(0))}initChart(){var{data:t,options:r,type:n}=this.options;r.maintainAspectRatio=!1,this.attachPluginOptions(r,n),ca(this.options),this.canvas=this.shadowRoot.querySelector("#chart"),this.chart=new e.Chart(this.canvas,{type:n,data:t,options:r}),this.updateChartSize(),this.initialized=!0}updateChartSize(){var t=Math.floor(this.width),e=Math.floor(this.height);this.canvas.style.width=`${t}px`,this.canvas.style.height=`${e}px`;var r=()=>{0==this.canvas.offsetWidth||0==this.canvas.offsetHeight?requestAnimationFrame(r):this.chart.resize()};requestAnimationFrame(r)}updateChartConfig(){if(this.chart){var{data:t,options:e,type:r}=this.options;e.maintainAspectRatio=!1,this.attachPluginOptions(e,r),ca(this.options),this.chart.type=r,this.chart.data=t,this.chart.options=e,this.chart.data.rawData=this.data,this.chart.update(0)}}attachPluginOptions(t={}){var e=t.plugins=t.plugins||{};this.attachDatalabelPluginOptions(e)}attachDatalabelPluginOptions(t={}){var e=t.datalabels=t.datalabels||{};e.display=function(t){return!!t.dataset.displayValue},e.anchor=function(t){return t.dataset.dataLabelAnchor||"center"},e.color=function(t){return t.dataset.defaultFontColor||"#000"},e.font=function(t){return{size:t.dataset.defaultFontSize}},e.clamp=!0,e.formatter=function(t,e){var r=e.dataset.valuePrefix||"",n=e.dataset.valueSuffix||"";return null==t?t:r+String(t).toLocaleString()+n}}}customElements.define(_a.is,_a);var xa={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"chartjs",label:"",name:"chart"}],"value-property":"data"};t.Component.register("chartjs",class extends t.HTMLOverlayElement{get nature(){return xa}get hasTextProperty(){return!1}get tagName(){return"things-chartjs"}createElement(){super.createElement();var{width:t,height:e}=this.bounds,r=this.element,n=this.data;r.width=t,r.height=e,this._setChartConfig(r),r.data=n}setElementProperties(e){var{chart:r}=this.state,{width:n,height:a}=this.bounds,i=this.data;try{e.width=n,e.height=a,r&&this._isChartChanged&&(this._setChartConfig(e),this._isChartChanged=!1),this._isDataChanged&&(e.data=i,this._isDataChanged=!1)}catch(e){t.error(e)}}_setChartConfig(t){var{chart:e,fontSize:r=12,fontFamily:n}=this.state,a=Hr(e);a.options.defaultFontSize=r,a.options.defaultFontFamily=n,t.options=a}onchange(t,e){this._isChartChanged=!1,("chart"in t||"fontSize"in t||"fontFamily"in t)&&(this._isChartChanged=!0),super.onchange(t,e)}onchangeData(t){this._isDataChanged=!0}});return"./chartjs"});
